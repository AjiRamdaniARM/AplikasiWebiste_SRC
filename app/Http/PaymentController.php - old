<?php

namespace App\Http\Controllers;

use App\Models\Invoice;
use App\Models\Race;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\File;
use Illuminate\Support\Facades\Log;
use Illuminate\Support\Facades\Storage;

class PaymentController extends Controller
{
    public function pay(Request $request ,$id, $name) {
        $data = Race::find($id);
        $inv = Invoice::where('name', $name)->firstOrFail();


        $inv -> status = $request -> status;
        $inv -> save();
        // $foto_file = $request->file('image');
        // $foto_ekstensi = $foto_file->extension();
        // $foto_nama = date('ymdhis') ."." . $foto_ekstensi;
        // $foto_file->move(public_path('images/payment'), $foto_nama);

        // $inv -> image = $foto_nama;

        return redirect('payment/'.$id)
        ->with('pending', 'Pending')
        ->with('Upload', 'Sudah Upload')
        ->with('message', 'Pembayaran Sukses')
        ;






    }
}
